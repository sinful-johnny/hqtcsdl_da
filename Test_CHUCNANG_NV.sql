use QL_NHAKHOA
go

exec sp_ThemTK 'lolo', '012345678', '2003/10/20', 'hhihi@gmail.com', '123', 'NV'
exec sp_ThemTK 'loNHASI', '012340078', '2003/10/20', 'hhihi@gmail.com', '123', 'NS'
exec sp_ThemTK 'loKHACHHANG', '012345318', '2003/10/20', 'hhihGIi@gmail.com', '123', 'KH'
exec sp_ThemTK 'loKHACHHANG1', '012235318', '2003/10/20', 'hhihGIi@gmail.com', '123', 'KH'
go

INSERT INTO LICH_LAM_VIEC(ID_LLV,NGAYKHAM,GIOKHAM,TRANGTHAI,ID_NS) VALUES
(cast(NEWID() as varchar(255)), '2023-12-31', '09:00:00', N'Trống',		(select ID_TAIKHOAN from TAI_KHOAN where SDT = '09992233445')),
(cast(NEWID() as varchar(255)), '2024-1-13', '10:30:00', N'Trống',		(select ID_TAIKHOAN from TAI_KHOAN where SDT = '07788994437')),
(cast(NEWID() as varchar(255)), '2024-1-1', '14:00:00', N'Trống',		(select ID_TAIKHOAN from TAI_KHOAN where SDT = '05673219876'));
go
-- XEM LICH KHAM
EXEC SP_NV_XEMLICHKHAM
GO
-- XEM LICH LAM VIEC
EXEC SP_NV_XEMLICHLAMVIEC
GO

-- XEM HOA DON
EXEC SP_NV_XEMHOADON
GO

-- XEM TT THUOC
EXEC SP_NV_XEMTTTHUOC
GO

-- XEM THUOC SD
EXEC SP_NV_XEMDANHMUC_THUOCSD
GO
-- XEM DICH VU
EXEC SP_NV_XEMDICHVU_SD
GO

EXEC SP_NV_THEMLICHKHAM '7EFAE05C-4993-48E7-874D-7FE5B49099A1', '06DC015C-083B-4339-B0C3-6C8D025C4F42' , '2024-01-01', '14:00:00.0000000'

EXEC SP_NV_THEMLICHKHAM 'DB8C889A-E3CF-4ADD-B749-EB404EC7E29E', '06DC015C-083B-4339-B0C3-6C8D025C4F42' , '2023-12-31', '09:00:00.0000000'
go

SELECT *
FROM TAI_KHOAN
WHERE LOAITK = 'NS'

SELECT *
FROM LICH_DAT_KHAM

delete 
from LICH_DAT_KHAM

UPDATE LICH_LAM_VIEC
SET TRANGTHAI = N'Trống';

SELECT *
FROM LICH_LAM_VIEC

SELECT * 
FROM TAI_KHOAN
WHERE HOTEN = 'loKHACHHANG1'

SELECT * 
FROM LICH_DAT_KHAM

-- them hoa don
-- them thong tin test
INSERT INTO THUOC_SD(ID_BA,ID_THUOC,SOLUONG) VALUES
('3A4BCB0F-931C-40DD-934A-9A13F4D911AA','02F404B7-C57F-468B-A5E6-56134D7A25CE' , 5),
('3A4BCB0F-931C-40DD-934A-9A13F4D911AA', '448FE0B4-BD44-4656-8BF0-D224FECE7438', 10),
('3A4BCB0F-931C-40DD-934A-9A13F4D911AA', '4C26F304-7A9F-45AB-8DC6-CC15738923E7', 15);

INSERT INTO LOAI_DV(ID_LOAIDV, TENDV, GIATIEN) VALUES
(cast(NEWID() as varchar(255)), N'Dịch vụ 1', 100000),
(cast(NEWID() as varchar(255)), N'Dịch vụ 2', 10000),
(cast(NEWID() as varchar(255)), N'Dịch vụ 3', 200000);

INSERT INTO DICHVU_SD(ID_DVSD, ID_LOAIDV, THANHTIEN, ID_HOADON, ID_BA) VALUES
(cast(NEWID() as varchar(255)),'1CCB7C4C-F226-4CE2-AE65-71FF00A6F745', 100000, NULL, '3A4BCB0F-931C-40DD-934A-9A13F4D911AA');

insert BENH_AN(ID_BA,ID_KH,ID_NS,NGAYKHAM)
values
(cast(NEWID() as varchar(255)), 'DB8C889A-E3CF-4ADD-B749-EB404EC7E29E', '03DE642C-F438-48D5-9C13-D842F2FDBBA0', '2023-01-10');
go
 
-- test
EXEC SP_NV_LAPHOADON '06DC015C-083B-4339-B0C3-6C8D025C4F42', '3A4BCB0F-931C-40DD-934A-9A13F4D911AA'
GO

SELECT * 
FROM HOA_DON

SELECT * 
FROM THUOC_SD

SELECT * 
FROM BENH_AN
WHERE ID_KH = 'DB8C889A-E3CF-4ADD-B749-EB404EC7E29E'

SELECT * 
FROM THUOC

select * 
from LOAI_DV

UPDATE DICHVU_SD
SET ID_HOADON = NULL;

delete
FROM HOA_DON
WHERE ID_NV ='06DC015C-083B-4339-B0C3-6C8D025C4F42'AND ID_BA= '3A4BCB0F-931C-40DD-934A-9A13F4D911AA'

SELECT *
FROM DICHVU_SD
